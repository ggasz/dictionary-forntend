<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>사전검색서비스</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="http://example.com/myicon.png">
</head>
<body>
    <!-- 검색창 -->
    <div id="search-box"> 
        <input id = "search" type = "text" value=""placeholder="단어를 검색하세요...">
        <input id = "submit" type = "submit" value="submit">
    </div>
 
    <!-- 사전 -->
    <div id="container"></div>
    <script>
        const query = document.getElementById('search')
        const submitBtn = document.getElementById('submit')
        const BASE_URL = 'http://localhost:5000/api/words'
        
        // 서버 데이터 가져오기
        function getData(baseUrl, query){
            fetch(`${baseUrl}/${query}`, {
                headers: {
                    "Conene-Type": "application/json",
                }
            })
            .then( res => res.json() )
            .then( data =>{
                console.log(data)
                const {words} = data;                
                const template = words.map(word => {
                    if(word.r_seq == undefined){
                        word.r_seq =""
                    }
                    return(
                        `
                            <div class="item">
                                <div class="word"><a href="${word.r_link}"target="_blank">${word.r_word}</a><sup>${word.r_seq}</sup>${word.r_chi}</div>
                                <p class="description">${word.r_pos}<br>${word.r_des}</div>
                            </div>
                        `
                    )
                })
                container.innerHTML = template.join("")//DOM에 Templeate 삽입
            })
            
        }
        submitBtn.addEventListener('click', function(){
            console.log(query.value)
            getData(BASE_URL, query.value)
        })
        query.addEventListener('keypress',function(e){
            if(e.keyCode === 13){
                getData(BASE_URL, query.value)
            }
        })
        window.addEventListener('DOMContentLoaded', function(){
            getData(BASE_URL)
        });
    </script>
</body>
</html>